<:Window bind:innerWidth='viewportWidth'/>

<div id="breakpoints">
	<style type="text/css">
	body {margin: 0}
	</style>
	{{#each breakpoints as pair}}
	<div class="breakpoint">
		{{#if pair.min}}
		<div class="breakpoint-min" style="background-size:{{pair.min.width}} 100%"></div>
		{{/if}}
		{{#if pair.max}}
		<div class="breakpoint-max" style="background-size:{{pair.max.width}} 100%"></div>
		{{/if}}
		<button class="select-button" type="button" on:click="set({ iframeWidth: pair.pixels })">
			{{#if pair.min}}min: {{pair.min.width}} {{/if}}
			{{#if pair.max}}max: {{pair.max.width}} {{/if}}
		</button>
	</div>
	{{/each}}
</div>

<div ref:upperIframeWrap class="iframe-wrapper" style="width: {{iframeWidth}}px">
	<iframe class="iframe" ref:upperIframe src="?"></iframe>
</div>
<label for="resizer">Viewport width</label> <input type="number" bind:value="iframeWidth" />
<input id="resizer" class="resizer" ref:resizer type="range" min="0" max="{{viewportWidth}}" step="1" bind:value="iframeWidth" />

<div ref:lowerIframeWrap class="iframe-wrapper" style="width: calc({{iframeWidth}}px - 1px)">
	<iframe class="iframe" ref:lowerIframe src="?"></iframe>
</div>

<style>

	.breakpoint {
		position: relative;
		text-align: center;
		border-top: 1px solid #bbb;
		border-bottom: 1px solid #bbb;
		margin-bottom: 0.7rem;
	}

	.breakpoint-min {
		height: 1rem;
		background-position: 50% center;
		background-repeat: no-repeat;
		background-color: #eee;
		background-image: linear-gradient(#ddd,#ddd);
	}

	.breakpoint-min.is-selected {
		background-color: #CFFF70;
		background-image: linear-gradient(#ccc,#ccc);
	}

	.breakpoint-max {
		height: 1rem;
		background-position: 50% center;
		background-repeat: no-repeat;
		background-color: #ddd;
		background-image: linear-gradient(#eee,#eee);
	}

	.breakpoint-max.is-selected {
		background-color: #ccc;
		background-image: linear-gradient(#CFFF70,#CFFF70);
	}

	.select-button {
		padding: 0.2rem 0.6rem;
		border: 1px solid #aaa;
		border-radius: 0px 0px 0.6rem 0.6rem;
		background-color: #fff;
		position: absolute;
		top: -1px;
		left: 50%;
		transform: translate(-50%);
	}

	.iframe-wrapper {
		margin: 1rem auto;
		height: 40vh;
		outline: 1px solid #aaa;
	}

	.iframe {
		width: 100%;
		height: 100%;
		border: none;
	}

	.resizer {
		width: 100%;
		margin: 0;
	}

</style>

<script>
	export default {
		oncreate () {

		}
	};
</script>