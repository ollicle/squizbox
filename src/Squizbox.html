<:Window bind:innerWidth='viewportWidth'/>

<div id="breakpoints">
	<style type="text/css">
	body {margin: 0}
	</style>

	{{#each breakpoints as pair}}
		<Breakpoint selected="false" minWidth="{{pair.min && pair.min.width}}" maxWidth="{{pair.max && pair.max.width}}" />
	{{/each}}
</div>

<div ref:upperIframeWrap class="iframe-wrapper" style="width: {{iframeWidth}}px">
	<iframe class="iframe" ref:upperIframe src="?"></iframe>
</div>
<label for="resizer">Viewport width</label> <input type="number" bind:value="iframeWidth" />
<input id="resizer" class="resizer" ref:resizer type="range" min="0" max="{{viewportWidth}}" step="1" bind:value="iframeWidth" />

<div ref:lowerIframeWrap class="iframe-wrapper" style="width: calc({{iframeWidth}}px - 1px)">
	<iframe class="iframe" ref:lowerIframe src="?"></iframe>
</div>

<script>
	import Breakpoint from './Breakpoint.html';

	function maxOrMin (pair) {
		return pair.min || pair.max;
	}

	function isSelected (pair) {
// 		selected === pair.width ? 'is-selected' : '';
		return '';
	}

	export default {
		components: {
			Breakpoint
		},
		helpers: {
			maxOrMin,
			isSelected
		},
		methods: {
// 			select: function (width) {
// 				console.log(width, this.get('selected'));
//
// 				this.set({selected: width});
// 			}
		}
	};
</script>
<style>

	.iframe-wrapper {
		margin: 1rem auto;
		height: 40vh;
		outline: 1px solid #aaa;
	}

	.iframe {
		width: 100%;
		height: 100%;
		border: none;
	}

	.resizer {
		width: 100%;
		margin: 0;
	}

</style>